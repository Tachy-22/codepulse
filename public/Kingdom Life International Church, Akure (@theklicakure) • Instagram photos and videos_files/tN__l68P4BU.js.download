;/*FB_PKG_DELIM*/

__d("PolarisDynamicExploreV3MediaPageGrid.react",["CometRelay","FBLogger","PolarisDynamicExploreMediaHelpers","PolarisDynamicExplorePageSharedGrid.react","PolarisDynamicExploreTypes","PolarisExploreLogger","PolarisExploreV2ExploreGridFragment","PolarisExploreV2ExploreGridRootQuery","PolarisLinkBuilder","PolarisOrganicThumbnailImpression","PolarisReactRedux.react","PolarisRoutes","PolarisUA","emptyFunction","polarisDynamicExploreSelectors","polarisLogAction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j=4;function k(a){return d("PolarisUA").isMobile()?d("PolarisLinkBuilder").buildChainingMediaLink(d("PolarisDynamicExploreMediaHelpers").getPostCode(a)):d("PolarisLinkBuilder").buildMediaLink(d("PolarisDynamicExploreMediaHelpers").getPostCode(a))}function a(a){var b=d("react-compiler-runtime").c(11),e=a.exploreGridType,f=a.exploreQuery,g=a.pageID;a=d("PolarisReactRedux.react").useSelector(p);f=d("CometRelay").usePreloadedQuery(c("PolarisExploreV2ExploreGridRootQuery"),f);f=d("CometRelay").usePaginationFragment(c("PolarisExploreV2ExploreGridFragment"),f);var h=f.loadNext;f=d("PolarisReactRedux.react").useSelector(o);var q=n,r;b[0]!==h?(r=function(){c("polarisLogAction")("discoverNextLoadAttempt"),h(j,{onComplete:q})},b[0]=h,b[1]=r):r=b[1];r=r;var s=d("PolarisReactRedux.react").useSelector(m),t=l,u;b[2]!==g?(u=function(a,b){return d("PolarisOrganicThumbnailImpression").makeThumbnailImpressionAction({analyticsContext:g,column:a.column,gridItemSize:b,itemType:a.item_type,mediaType:(b=a.media_type)!=null?b:void 0,postId:d("PolarisDynamicExploreMediaHelpers").getPostId(a),row:a.row})},b[2]=g,b[3]=u):u=b[3];u=u;a=a?f.nonpersonalized:f.personalized;b[4]!==e||b[5]!==u||b[6]!==r||b[7]!==g||b[8]!==s||b[9]!==a?(f=i.jsx(c("PolarisDynamicExplorePageSharedGrid.react"),{exploreGridType:e,logGridItemClick:t,logGridItemImpression:u,mediaLinkBuilder:k,modalEntryPath:d("PolarisRoutes").DISCOVER_MEDIA_PATH,onNextPage:r,pageID:g,pagination:a,requestInitialGrid:c("emptyFunction"),sectionalItems:s}),b[4]=e,b[5]=u,b[6]=r,b[7]=g,b[8]=s,b[9]=a,b[10]=f):f=b[10];return f}function l(a,b,c,e,f){d("PolarisExploreLogger").logExploreHomeClick({column:f,gridItemSize:b,mediaType:d("PolarisDynamicExploreMediaHelpers").getMediaType(a),postId:d("PolarisDynamicExploreMediaHelpers").getPostId(a),row:e,type:d("PolarisExploreLogger").getDynamicExploreGridItemType(a)})}function m(a){return d("polarisDynamicExploreSelectors").getSupportedSectionalItems(a,d("PolarisDynamicExploreTypes").DYNAMIC_EXPLORE_GRID_TYPES.home_explore_grid)}function n(a){a==null?c("polarisLogAction")("discoverPostsLoaded"):(c("polarisLogAction")("discoverPostsLoadFailed"),c("FBLogger")("ig_web","ig_web_h1_2023_explore -> explore_v3").catching(a).mustfix("PolarisDynamicExploreV3MediaPageGrid.react.js: failed to load next page of explore grid"))}function o(a){return a.dynamicExplore.pagination}function p(a){return a.dynamicExplore.isNonPersonalizedExplore}g["default"]=a}),98);
__d("PolarisDynamicExploreV3MediaPageGridWithRetry.react",["CometPlaceholder.react","CometRelay","PolarisDynamicExploreActions","PolarisDynamicExploreLoadingSpinner.react","PolarisDynamicExploreTypes","PolarisDynamicExploreV3MediaPageGrid.react","PolarisErrorBoundaryWithRetry.react","PolarisErrorRetrySection.react","PolarisExploreV2ExploreGridRootQuery","PolarisReactRedux.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(16),e=a.exploreQuery;a=a.pageID;var f=d("PolarisReactRedux.react").useDispatch(),g=d("CometRelay").useRelayEnvironment(),h=j(!1),k=h[0],l=h[1];b[0]!==g?(h=function(a){return function(){l(!0),d("CometRelay").fetchQuery(g,c("PolarisExploreV2ExploreGridRootQuery"),{}).toPromise()["finally"](function(){l(!1),a()})}},b[0]=g,b[1]=h):h=b[1];var m=h;b[2]!==m||b[3]!==f?(h=function(a,b){f(d("PolarisDynamicExploreActions").logErrorAndShowRetryToast(a,m(b)))},b[2]=m,b[3]=f,b[4]=h):h=b[4];h=h;var n;b[5]!==m?(n=function(a,b){a=m(b);return i.jsx(c("PolarisErrorRetrySection.react"),{onRetry:a})},b[5]=m,b[6]=n):n=b[6];n=n;var o;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(o=i.jsx(c("PolarisDynamicExploreLoadingSpinner.react"),{}),b[7]=o):o=b[7];var p;b[8]!==k||b[9]!==e||b[10]!==a?(p=!k&&i.jsx(c("PolarisDynamicExploreV3MediaPageGrid.react"),{exploreGridType:d("PolarisDynamicExploreTypes").DYNAMIC_EXPLORE_GRID_TYPES.home_explore_grid,exploreQuery:e,pageID:a}),b[8]=k,b[9]=e,b[10]=a,b[11]=p):p=b[11];b[12]!==h||b[13]!==n||b[14]!==p?(k=i.jsx(c("CometPlaceholder.react"),{fallback:o,children:i.jsx(c("PolarisErrorBoundaryWithRetry.react"),{fallback:n,onError:h,children:p})}),b[12]=h,b[13]=n,b[14]=p,b[15]=k):k=b[15];return k}g["default"]=a}),98);
__d("PolarisExploreV3RootContent.react",["CometPlaceholder.react","FBLogger","PolarisDynamicExploreLoadingSpinner.react","PolarisDynamicExplorePageContentWrapper.react","PolarisDynamicExploreV3MediaPageGridWithRetry.react","PolarisQPManager.react","PolarisReactRedux.react","PolarisRoutes","PolarisSearchResultsListContainer.react","PolarisUA","cr:6792","polarisSearchSelectors","react","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect,k="exploreLandingPage";function a(a){var e=a.rootQuery;a=a.routeProps;var f=c("useCometRouterDispatcher")(),g=a.is_search_open;a=a.nonpersonalized;var h=d("PolarisReactRedux.react").useDispatch();h({isNonPersonalizedExplore:a,type:"NON_PERSONALIZED_EXPLORE"});h=d("PolarisReactRedux.react").useSelector(d("polarisSearchSelectors").selectPendingQuery);j(function(){if(d("PolarisUA").isMobile())try{f==null?void 0:f.prefetchRouteDefinition(d("PolarisRoutes").DISCOVER_SEARCH_PATH)}catch(a){c("FBLogger")("ig_web").catching(a)}},[f]);a=g===!0&&d("PolarisUA").isMobile();return i.jsxs(c("PolarisDynamicExplorePageContentWrapper.react"),{pageId:k,children:[i.jsx(c("PolarisQPManager.react"),{slot:"explore"}),a?i.jsxs(i.Fragment,{children:[h.length>0&&b("cr:6792")!=null&&i.jsx(b("cr:6792"),{pendingQuery:h}),i.jsx(c("PolarisSearchResultsListContainer.react"),{analyticsContext:k,isVisibleInPopup:!1})]}):i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("PolarisDynamicExploreLoadingSpinner.react"),{}),children:i.jsx(c("PolarisDynamicExploreV3MediaPageGridWithRetry.react"),{exploreQuery:e,pageID:k})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisExploreV3Root.react",["PolarisExploreMobileHeader.react","PolarisExploreV3RootContent.react","PolarisMobileHeaderWrapper.react","react","react-compiler-runtime","usePolarisPageID","withPolarisShell.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.props;a=a.queries;e=e.routeProps;a=a.polarisExploreGridRootQuery;var f=e.is_search_open,g=c("usePolarisPageID")();f=f===!0;var h;b[0]!==g||b[1]!==f?(h=i.jsx(c("PolarisMobileHeaderWrapper.react"),{children:i.jsx(c("PolarisExploreMobileHeader.react"),{analyticsContext:g,isSearchOpen:f})}),b[0]=g,b[1]=f,b[2]=h):h=b[2];b[3]!==a||b[4]!==e?(g=i.jsx(c("PolarisExploreV3RootContent.react"),{rootQuery:a,routeProps:e}),b[3]=a,b[4]=e,b[5]=g):g=b[5];b[6]!==h||b[7]!==g?(f=i.jsxs(i.Fragment,{children:[h,g]}),b[6]=h,b[7]=g,b[8]=f):f=b[8];return f}b=c("withPolarisShell.react")(a);g["default"]=b}),98);